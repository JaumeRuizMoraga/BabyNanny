Index: src/main/java/babbynannyapi/controller/Controlador.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package babbynannyapi.controller;\r\n\r\nimport org.bson.json.JsonObject;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport babbynannyapi.model.Bebe;\r\nimport babbynannyapi.model.Token;\r\nimport babbynannyapi.model.Usuario;\r\nimport babbynannyapi.repository.BebeRepository;\r\nimport babbynannyapi.repository.TokenRepository;\r\nimport babbynannyapi.repository.UsuarioRepository;\r\n\r\nimport java.io.*;\r\nimport java.util.ArrayList;\r\nimport java.util.Optional;\r\n\r\n\r\n@RestController\r\n@RequestMapping(\"/BabyNanny\")\r\npublic class Controlador {\r\n\r\n    @Autowired\r\n    private UsuarioRepository usuarioRepository;\r\n\r\n    @Autowired\r\n    private TokenRepository tokenRepository;\r\n\r\n    @Autowired\r\n    private BebeRepository bebeRepository;\r\n\r\n    /**\r\n     * Función utilitzada para que un usuario haga login y se le genere un token\r\n     *\r\n     * @param usuario\r\n     * @return ResponseEntity<?>\r\n     */\r\n    @PostMapping(\"/login\")\r\n\r\n    public ResponseEntity<Object> login(@RequestBody Usuario usuario) throws JSONException {\r\n\r\n        System.out.println(usuario.getNombre());\r\n        System.out.println(usuario.getPassword());\r\n        Optional<Usuario> user = usuarioRepository.findByNombreAndPassword(usuario.getNombre(), usuario.getPassword());\r\n        Optional<Token> nombreusertoken = tokenRepository.buscarUsuarioToken(usuario.getNombre());\r\n        if (user.isPresent()) {\r\n            if (nombreusertoken.isPresent()) {\r\n                return ResponseEntity.status(HttpStatus.CONFLICT).build();\r\n            } else {\r\n                Token token = new Token(usuario.getNombre());\r\n                tokenRepository.save(token);\r\n                return ResponseEntity.status(HttpStatus.NO_CONTENT).build();\r\n            }\r\n        } else {\r\n            return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Función utilitzada pera registrar un usuario en la base de datos\r\n     *\r\n     * @param usuario\r\n     * @return ResponseEntity<?>\r\n     */\r\n    @PostMapping(\"/register\")\r\n    ResponseEntity<?> registro(@RequestBody Usuario usuario) {\r\n        Optional<Usuario> userPassEmail = usuarioRepository.buscarUserPassEmail(usuario.getNombre(), usuario.getPassword(), usuario.getCorreo());\r\n        if (userPassEmail.isPresent()) {\r\n            return ResponseEntity.status(HttpStatus.CONFLICT).build();\r\n        }\r\n        else {\r\n            usuarioRepository.save(usuario);\r\n            return ResponseEntity.status(HttpStatus.OK).build();\r\n        }\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/babbynannyapi/controller/Controlador.java b/src/main/java/babbynannyapi/controller/Controlador.java
--- a/src/main/java/babbynannyapi/controller/Controlador.java	(revision f24ae576d43334058e74109ed826c652092da8a2)
+++ b/src/main/java/babbynannyapi/controller/Controlador.java	(date 1770996956790)
@@ -11,12 +11,15 @@
 import babbynannyapi.model.Bebe;
 import babbynannyapi.model.Token;
 import babbynannyapi.model.Usuario;
-import babbynannyapi.repository.BebeRepository;
+import babbynannyapi.repository.BabyRepository;
 import babbynannyapi.repository.TokenRepository;
-import babbynannyapi.repository.UsuarioRepository;
+import babbynannyapi.repository.UserRepository;
 
 import java.io.*;
 import java.util.ArrayList;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Map;
 import java.util.Optional;
 
 
@@ -24,15 +27,39 @@
 @RequestMapping("/BabyNanny")
 public class Controlador {
 
-    @Autowired
-    private UsuarioRepository usuarioRepository;
-
-    @Autowired
-    private TokenRepository tokenRepository;
-
-    @Autowired
-    private BebeRepository bebeRepository;
+	@Autowired
+	private UserRepository userRepository;
+	
+	@Autowired
+	private TokenRepository tokenRepository;
+	
+	@Autowired
+	private BabyRepository babyRepository;
 
+	
+	@PostMapping("/babys")
+	ResponseEntity<Object> buscarBebes(@RequestParam(name = "token") String token){
+		Optional<Token> t = tokenRepository.searchToken(token);
+		if (t.isPresent()) {
+			List<Bebe> babyList = babyRepository.searchBabies(t.get().getNombreUsuario());
+		    Map<String, List<Bebe>> response = new HashMap<>();
+		    response.put("bebes", babyList);
+			return ResponseEntity.status(HttpStatus.NO_CONTENT).build();
+		}
+		return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();
+	}
+	
+	@PutMapping("/newEntry")
+	ResponseEntity<Object> newEntry(@RequestParam(name = "id") String token){
+		Optional<Token> t = tokenRepository.searchToken(token);
+		if (t.isPresent()) {
+			List<Bebe> listaBebes = babyRepository.searchBabies(t.get().getNombreUsuario());
+		    Map<String, List<Bebe>> response = new HashMap<>();
+		    response.put("bebes", listaBebes);
+			return ResponseEntity.status(HttpStatus.NO_CONTENT).build();
+		}
+		return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();
+	}
     /**
      * Función utilitzada para que un usuario haga login y se le genere un token
      *
@@ -45,10 +72,10 @@
 
         System.out.println(usuario.getNombre());
         System.out.println(usuario.getPassword());
-        Optional<Usuario> user = usuarioRepository.findByNombreAndPassword(usuario.getNombre(), usuario.getPassword());
-        Optional<Token> nombreusertoken = tokenRepository.buscarUsuarioToken(usuario.getNombre());
+        Optional<Usuario> user = userRepository.findByNombreAndPassword(usuario.getNombre(), usuario.getPassword());
+        Optional<Token> usertoken = tokenRepository.searchUserToken(usuario.getNombre());
         if (user.isPresent()) {
-            if (nombreusertoken.isPresent()) {
+            if (usertoken.isPresent()) {
                 return ResponseEntity.status(HttpStatus.CONFLICT).build();
             } else {
                 Token token = new Token(usuario.getNombre());
@@ -67,13 +94,13 @@
      * @return ResponseEntity<?>
      */
     @PostMapping("/register")
-    ResponseEntity<?> registro(@RequestBody Usuario usuario) {
-        Optional<Usuario> userPassEmail = usuarioRepository.buscarUserPassEmail(usuario.getNombre(), usuario.getPassword(), usuario.getCorreo());
+    ResponseEntity<?> registro(@RequestBody Usuario user) {
+        Optional<Usuario> userPassEmail = userRepository.searchUserPassEmail(user.getNombre(), user.getPassword(), user.getCorreo());
         if (userPassEmail.isPresent()) {
             return ResponseEntity.status(HttpStatus.CONFLICT).build();
         }
         else {
-            usuarioRepository.save(usuario);
+        	userRepository.save(user);
             return ResponseEntity.status(HttpStatus.OK).build();
         }
 
Index: src/main/java/babbynannyapi/repository/TokenRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package babbynannyapi.repository;\r\n\r\nimport org.springframework.data.mongodb.repository.MongoRepository;\r\nimport org.springframework.data.mongodb.repository.Query;\r\n\r\nimport babbynannyapi.model.Token;\r\n\r\nimport java.util.Optional;\r\n\r\npublic interface TokenRepository extends MongoRepository<Token, String> {\r\n\t\r\n\t@Query(value = \"{ 'token': ?0}\")\r\n    Optional<Token> buscarToken(String token);\r\n\r\n    @Query(value = \"{ 'nombreUsuario': ?0}\")\r\n    Optional<Token> buscarUsuarioToken(String nombreUsuario);\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/babbynannyapi/repository/TokenRepository.java b/src/main/java/babbynannyapi/repository/TokenRepository.java
--- a/src/main/java/babbynannyapi/repository/TokenRepository.java	(revision f24ae576d43334058e74109ed826c652092da8a2)
+++ b/src/main/java/babbynannyapi/repository/TokenRepository.java	(date 1770996937496)
@@ -10,8 +10,8 @@
 public interface TokenRepository extends MongoRepository<Token, String> {
 	
 	@Query(value = "{ 'token': ?0}")
-    Optional<Token> buscarToken(String token);
+    Optional<Token> searchToken(String token);
 
     @Query(value = "{ 'nombreUsuario': ?0}")
-    Optional<Token> buscarUsuarioToken(String nombreUsuario);
+    Optional<Token> searchUserToken(String user);
 }
Index: src/main/java/babbynannyapi/repository/UsuarioRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/babbynannyapi/repository/UsuarioRepository.java b/src/main/java/babbynannyapi/repository/UserRepository.java
rename from src/main/java/babbynannyapi/repository/UsuarioRepository.java
rename to src/main/java/babbynannyapi/repository/UserRepository.java
--- a/src/main/java/babbynannyapi/repository/UsuarioRepository.java	(revision f24ae576d43334058e74109ed826c652092da8a2)
+++ b/src/main/java/babbynannyapi/repository/UserRepository.java	(date 1770996510326)
@@ -7,11 +7,11 @@
 
 import java.util.Optional;
 
-public interface UsuarioRepository extends MongoRepository<Usuario, String> {
+public interface UserRepository extends MongoRepository<Usuario, String> {
 
     @Query
     Optional<Usuario> findByNombreAndPassword(String nombre, String password);
 
     @Query(value = "{ 'nombre': ?0, 'password': ?1, 'correo': ?2 }")
-    Optional<Usuario> buscarUserPassEmail(String nombre, String password, String correo);
+    Optional<Usuario> searchUserPassEmail(String nombre, String password, String correo);
 }
\ No newline at end of file
Index: src/main/java/babbynannyapi/repository/BebeRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/babbynannyapi/repository/BebeRepository.java b/src/main/java/babbynannyapi/repository/BabyRepository.java
rename from src/main/java/babbynannyapi/repository/BebeRepository.java
rename to src/main/java/babbynannyapi/repository/BabyRepository.java
--- a/src/main/java/babbynannyapi/repository/BebeRepository.java	(revision f24ae576d43334058e74109ed826c652092da8a2)
+++ b/src/main/java/babbynannyapi/repository/BabyRepository.java	(date 1770996510325)
@@ -1,11 +1,14 @@
 package babbynannyapi.repository;
 
+import java.util.List;
+import java.util.Optional;
+
 import org.springframework.data.mongodb.repository.MongoRepository;
 import org.springframework.data.mongodb.repository.Query;
-
 import babbynannyapi.model.Bebe;
 
-public interface BebeRepository extends MongoRepository<Bebe, String> {
+public interface BabyRepository extends MongoRepository<Bebe, String> {
 	
-
+	 @Query(value = "{ 'tutores': ?0}")
+	 List<Bebe> searchBabies(String tutores);
 }
